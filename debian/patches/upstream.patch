Author: Upstream
Forwarded: no
 This is an upstream patch, it does not need to be forwarded.
Description: Official upstream patch.
 This patch was downloaded from:
 ftp://emboss.open-bio.org/pub/EMBOSS/fixes/patches/patch-1-3.gz
diff -c -N --recursive EMBOSS-6.0.1old/ajax/ajseqwrite.c EMBOSS-6.0.1/ajax/ajseqwrite.c
*** EMBOSS-6.0.1old/ajax/ajseqwrite.c	2008-07-14 15:58:07.000000000 +0100
--- EMBOSS-6.0.1/ajax/ajseqwrite.c	2009-01-10 10:22:26.000000000 +0000
***************
*** 3743,3749 ****
  	ajFmtPrintF(outseq->File, "DE   %S\n", outseq->Desc);
      
      if(ajStrGetLen(outseq->Tax))
! 	ajFmtPrintF(outseq->File, "OS   %S\n", outseq->Tax);
      
      if(ajListGetLength(outseq->Taxlist) > 1)
      {
--- 3743,3749 ----
  	ajFmtPrintF(outseq->File, "DE   %S\n", outseq->Desc);
      
      if(ajStrGetLen(outseq->Tax))
! 	ajFmtPrintF(outseq->File, "OS   %S.\n", outseq->Tax);
      
      if(ajListGetLength(outseq->Taxlist) > 1)
      {
diff -c -N --recursive EMBOSS-6.0.1old/emboss/acd/Makefile.am EMBOSS-6.0.1/emboss/acd/Makefile.am
*** EMBOSS-6.0.1old/emboss/acd/Makefile.am	2008-07-14 16:46:31.000000000 +0100
--- EMBOSS-6.0.1/emboss/acd/Makefile.am	2009-01-10 10:21:31.000000000 +0000
***************
*** 21,27 ****
  	fuzznuc.acd fuzzpro.acd fuzztran.acd \
  	garnier.acd geecee.acd getorf.acd giep.acd \
  	helixturnhelix.acd histogramtest.acd \
! 	hmoment.acd iep.acd infoalign.acd infoseq.acd intconv.acd \
  	isochore.acd jaspextract.acd jaspscan.acd lindna.acd listor.acd \
  	makenucseq.acd makeprotseq.acd marscan.acd \
  	maskambignuc.acd maskambigprot.acd maskfeat.acd maskseq.acd \
--- 21,28 ----
  	fuzznuc.acd fuzzpro.acd fuzztran.acd \
  	garnier.acd geecee.acd getorf.acd giep.acd \
  	helixturnhelix.acd histogramtest.acd \
! 	hmoment.acd iep.acd infoalign.acd infobase.acd inforesidue.acd \
!         infoseq.acd intconv.acd \
  	isochore.acd jaspextract.acd jaspscan.acd lindna.acd listor.acd \
  	makenucseq.acd makeprotseq.acd marscan.acd \
  	maskambignuc.acd maskambigprot.acd maskfeat.acd maskseq.acd \
***************
*** 48,55 ****
  	splitter.acd stretcher.acd stssearch.acd supermatcher.acd syco.acd \
  	tcode.acd testplot.acd textsearch.acd tfextract.acd tfm.acd \
  	tfscan.acd tmap.acd tranalign.acd transeq.acd treetypedisplay.acd \
! 	trimest.acd trimseq.acd twofeat.acd union.acd vectorstrip.acd \
! 	water.acd whichdb.acd wobble.acd \
  	wordcount.acd wordfinder.acd wordmatch.acd \
  	wossname.acd yank.acd
  
--- 49,56 ----
  	splitter.acd stretcher.acd stssearch.acd supermatcher.acd syco.acd \
  	tcode.acd testplot.acd textsearch.acd tfextract.acd tfm.acd \
  	tfscan.acd tmap.acd tranalign.acd transeq.acd treetypedisplay.acd \
! 	trimest.acd trimseq.acd trimspace.acd twofeat.acd union.acd \
!         vectorstrip.acd water.acd whichdb.acd wobble.acd \
  	wordcount.acd wordfinder.acd wordmatch.acd \
  	wossname.acd yank.acd
  
diff -c -N --recursive EMBOSS-6.0.1old/emboss/acd/Makefile.in EMBOSS-6.0.1/emboss/acd/Makefile.in
*** EMBOSS-6.0.1old/emboss/acd/Makefile.in	2008-07-16 19:33:19.000000000 +0100
--- EMBOSS-6.0.1/emboss/acd/Makefile.in	2009-01-10 10:21:31.000000000 +0000
***************
*** 209,215 ****
  	fuzznuc.acd fuzzpro.acd fuzztran.acd \
  	garnier.acd geecee.acd getorf.acd giep.acd \
  	helixturnhelix.acd histogramtest.acd \
! 	hmoment.acd iep.acd infoalign.acd infoseq.acd intconv.acd \
  	isochore.acd jaspextract.acd jaspscan.acd lindna.acd listor.acd \
  	makenucseq.acd makeprotseq.acd marscan.acd \
  	maskambignuc.acd maskambigprot.acd maskfeat.acd maskseq.acd \
--- 209,216 ----
  	fuzznuc.acd fuzzpro.acd fuzztran.acd \
  	garnier.acd geecee.acd getorf.acd giep.acd \
  	helixturnhelix.acd histogramtest.acd \
! 	hmoment.acd iep.acd infoalign.acd infobase.acd inforesidue.acd \
!         infoseq.acd intconv.acd \
  	isochore.acd jaspextract.acd jaspscan.acd lindna.acd listor.acd \
  	makenucseq.acd makeprotseq.acd marscan.acd \
  	maskambignuc.acd maskambigprot.acd maskfeat.acd maskseq.acd \
***************
*** 236,243 ****
  	splitter.acd stretcher.acd stssearch.acd supermatcher.acd syco.acd \
  	tcode.acd testplot.acd textsearch.acd tfextract.acd tfm.acd \
  	tfscan.acd tmap.acd tranalign.acd transeq.acd treetypedisplay.acd \
! 	trimest.acd trimseq.acd twofeat.acd union.acd vectorstrip.acd \
! 	water.acd whichdb.acd wobble.acd \
  	wordcount.acd wordfinder.acd wordmatch.acd \
  	wossname.acd yank.acd
  
--- 237,244 ----
  	splitter.acd stretcher.acd stssearch.acd supermatcher.acd syco.acd \
  	tcode.acd testplot.acd textsearch.acd tfextract.acd tfm.acd \
  	tfscan.acd tmap.acd tranalign.acd transeq.acd treetypedisplay.acd \
! 	trimest.acd trimseq.acd trimspace.acd twofeat.acd union.acd \
!         vectorstrip.acd water.acd whichdb.acd wobble.acd \
  	wordcount.acd wordfinder.acd wordmatch.acd \
  	wossname.acd yank.acd
  
diff -c -N --recursive EMBOSS-6.0.1old/emboss/data/Makefile.am EMBOSS-6.0.1/emboss/data/Makefile.am
*** EMBOSS-6.0.1old/emboss/data/Makefile.am	2008-07-14 16:09:23.000000000 +0100
--- EMBOSS-6.0.1/emboss/data/Makefile.am	2009-01-10 10:21:31.000000000 +0000
***************
*** 30,36 ****
                 Epprofile Eprior1.plib Eprior30.plib Erna.melt Eresidues.iub \
                 Esig.euk Esig.pro \
                 Etags.embl Etags.emboss \
!                Etags.gff Etags.gff3 Etags.gffprotein \
                 Etags.pir Etags.protein Etags.swiss \
                 Etcode.dat Evdw.dat Ewhite-wimley.dat \
                 embossre.equ Emwfilter.dat Emass.dat Emassmod.dat \
--- 30,36 ----
                 Epprofile Eprior1.plib Eprior30.plib Erna.melt Eresidues.iub \
                 Esig.euk Esig.pro \
                 Etags.embl Etags.emboss \
!                Etags.gff Etags.gff3 Etags.gffprotein Etags.gff3protein \
                 Etags.pir Etags.protein Etags.swiss \
                 Etcode.dat Evdw.dat Ewhite-wimley.dat \
                 embossre.equ Emwfilter.dat Emass.dat Emassmod.dat \
diff -c -N --recursive EMBOSS-6.0.1old/emboss/data/Makefile.in EMBOSS-6.0.1/emboss/data/Makefile.in
*** EMBOSS-6.0.1old/emboss/data/Makefile.in	2008-07-16 19:33:20.000000000 +0100
--- EMBOSS-6.0.1/emboss/data/Makefile.in	2009-01-10 10:21:31.000000000 +0000
***************
*** 228,234 ****
                 Epprofile Eprior1.plib Eprior30.plib Erna.melt Eresidues.iub \
                 Esig.euk Esig.pro \
                 Etags.embl Etags.emboss \
!                Etags.gff Etags.gff3 Etags.gffprotein \
                 Etags.pir Etags.protein Etags.swiss \
                 Etcode.dat Evdw.dat Ewhite-wimley.dat \
                 embossre.equ Emwfilter.dat Emass.dat Emassmod.dat \
--- 228,234 ----
                 Epprofile Eprior1.plib Eprior30.plib Erna.melt Eresidues.iub \
                 Esig.euk Esig.pro \
                 Etags.embl Etags.emboss \
!                Etags.gff Etags.gff3 Etags.gffprotein Etags.gff3protein \
                 Etags.pir Etags.protein Etags.swiss \
                 Etcode.dat Evdw.dat Ewhite-wimley.dat \
                 embossre.equ Emwfilter.dat Emass.dat Emassmod.dat \
diff -c -N --recursive EMBOSS-6.0.1old/emboss/jaspscan.c EMBOSS-6.0.1/emboss/jaspscan.c
*** EMBOSS-6.0.1old/emboss/jaspscan.c	2008-06-26 09:39:09.000000000 +0100
--- EMBOSS-6.0.1/emboss/jaspscan.c	2009-01-10 10:21:31.000000000 +0000
***************
*** 293,299 ****
  
  	    jaspscan_scan(substr,begin,mfname, cp, thresh, both, hits);
  
! 	    ajStrDel(&mfname);
  	}
  
  	jaspscan_ReportHits(TabRpt,mattab,hits);
--- 293,299 ----
  
  	    jaspscan_scan(substr,begin,mfname, cp, thresh, both, hits);
  
!             ajListPushAppend(flist, (void **)mfname);
  	}
  
  	jaspscan_ReportHits(TabRpt,mattab,hits);
***************
*** 303,308 ****
--- 303,312 ----
      }
  
  
+     while(ajListPop(flist,(void **)&mfname))
+         ajStrDel(&mfname);
+ 
+     
      ajStrDel(&dir);
      ajStrDel(&menu);
      ajStrDel(&excl);
diff -c -N --recursive EMBOSS-6.0.1old/emboss/vectorstrip.c EMBOSS-6.0.1/emboss/vectorstrip.c
*** EMBOSS-6.0.1old/emboss/vectorstrip.c	2008-06-26 09:39:09.000000000 +0100
--- EMBOSS-6.0.1/emboss/vectorstrip.c	2009-01-10 10:22:31.000000000 +0000
***************
*** 174,180 ****
      vectorlist = ajListNew();
  
      /* data from command line or file? */
!     if(vec == AJTRUE)
  	vectorstrip_read_vector_data(vectorfile, vectorlist);
      else
      {
--- 174,180 ----
      vectorlist = ajListNew();
  
      /* data from command line or file? */
!     if(vec && vectorfile)
  	vectorstrip_read_vector_data(vectorfile, vectorlist);
      else
      {
diff -c -N --recursive EMBOSS-6.0.1old/nucleus/embprop.c EMBOSS-6.0.1/nucleus/embprop.c
*** EMBOSS-6.0.1old/nucleus/embprop.c	2008-07-14 23:13:33.000000000 +0100
--- EMBOSS-6.0.1/nucleus/embprop.c	2009-01-10 10:21:31.000000000 +0000
***************
*** 880,885 ****
--- 880,886 ----
  
      if(allpartials)
      {
+         lim = defcnt;
  	for(i=0;i<lim;++i)
  	    for(j=i+1;j<lim;++j)
  	    {
